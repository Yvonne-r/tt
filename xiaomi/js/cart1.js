"use strict";var _createClass=function(){function t(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Computes=function(){function n(e){_classCallCheck(this,n)}return _createClass(n,[{key:"footNum",value:function(){$(".allGoodsNum").html($(".goodsCheckbox").length)}},{key:"del",value:function(){for(var n=this,o=document.getElementsByClassName("del"),e=0;e<$(".del").length;e++)!function(e){o[e].onclick=function(){o[e].parentNode.parentNode.remove(),n.del(),n.allMoney(),n.footNumber(),n.footNum()}}(e)}},{key:"allMoney",value:function(){for(var e=0,n=void 0,o=document.getElementsByClassName("goodsCheckbox"),t=0;t<o.length;t++)$(".goodsCheckbox").eq(t).is(".checked")&&(n=$(".goodsCheckbox").eq(t).parent().siblings(".content-login-header-total").children(".total-x"),e=parseInt(n.html())+e);$("#allNum").html(e)}},{key:"footNumber",value:function(){for(var e=0,n=0;n<$(".goodsCheckbox").length;n++)$(".goodsCheckbox").eq(n).is(".checked")&&(e+=1);$(".xGoodsNum").html(e)}},{key:"getPrice",value:function(e,n){return e*n}},{key:"sub",value:function(){for(var t=this,e=document.getElementsByClassName("item-a"),n=0;n<$(".item-a").length;n++)!function(o){e[o].onclick=function(){var e,n=$(".item-a").eq(o).parent().siblings(".content-login-header-number").val();0!=n&&($(".item-a").eq(o).parent().siblings(".content-login-header-number").val($(".item-a").eq(o).parent().siblings(".content-login-header-number").val()-1),n=$(".item-a").eq(o).parent().siblings(".content-login-header-number").val(),e=$(".item-a").eq(o).parent().parent().siblings(".content-login-header-price").children(".price-x").text(),$(".item-a").parent().eq(o).parent().siblings(".content-login-header-total").children(".total-x").html(t.getPrice(n,e))),t.allMoney()}}(n)}},{key:"add",value:function(){for(var t=this,e=document.getElementsByClassName("item-b"),n=0;n<e.length;n++)!function(o){e[o].onclick=function(){var e=$(".item-a").eq(o).parent().siblings(".content-login-header-number").val();$(".item-a").eq(o).parent().siblings(".content-login-header-number").val(parseInt(e)+1),e=$(".item-a").eq(o).parent().siblings(".content-login-header-number").val();var n=$(".item-a").eq(o).parent().parent().siblings(".content-login-header-price").children(".price-x").text();$(".item-a").eq(o).parent().parent().siblings(".content-login-header-total").children(".total-x").html(t.getPrice(e,n)),t.allMoney()}}(n)}},{key:"eventBind",value:function(){this.del(),this.allMoney(),this.footNumber(),this.footNum(),this.sub(),this.add()}}]),n}(),Compute=new Computes;function check(){for(var e=0;e<$(".checkbox").length;e++)!function(e){$(".checkbox").eq(e).mouseenter(function(){0==$(".checkbox").eq(e).is(".checked")&&($(".checkbox").eq(e).css("color","black"),$(".checkbox").eq(e).mouseleave(function(){$(".checkbox").eq(e).css("color","#fff")}))})}(e);for(var n=document.getElementsByClassName("goodsCheckbox"),o=function(e){n[e].onclick=function(){0==$(".goodsCheckbox").eq(e).is(".checked")?($(".goodsCheckbox").eq(e).addClass("checked"),$(".goodsCheckbox").eq(e).css("color","#fff")):($(".goodsCheckbox").eq(e).removeClass("checked"),$(".checkbox").eq(0).removeClass("checked")),Compute.footNumber(),Compute.allMoney(),function(){for(var e=0;e<$(".goodsCheckbox").length;e++)if(0==$(".goodsCheckbox").eq(e).is(".checked"))return;return!0}()&&$(".checkbox").eq(0).addClass("checked")}},t=0;t<n.length;t++)o(t)}function getGoods(){var i,s,l;$.ajax({type:"GET",url:"php/list.php",success:function(e){for(var n=[],o=e.split(","),t=0;t<o.length-1;t++){n[n.length]=o[t].split(" "),i=n[n.length-1][1],s=n[n.length-1][0],l=n[n.length-1][2];var c=$('<div class="list-item"><div class="item-box"><div class="item-check"><div class="checkbox goodsCheckbox">√</div></div><div class="item-img"><a href="#"><img src="'+i+'" alt=""></a></div><div class="content-login-header-goodsName">'+s+'</div><div class="content-login-header-price"><span class="price-x">'+l+'</span>元</div><div class="content-login-header-num"><a><div class="item-a">-</div></a><input type="text" class="content-login-header-number" value="1"><a><div class="item-b">+</div></a></div><div class="content-login-header-total"><span class="total-x">'+l+'</span>元</div><div class="content-login-header-action del"">删除</div></div></div>');$(".list-body").append(c),$(".content-box").removeClass("h"),$(".content").css("display","none"),$(".login").css("display","none"),$(".content-login").css("display","block"),check(),Compute.eventBind()}}})}Compute.eventBind(),$(".item-box"),setInterval(function(){"http://127.0.0.1:8848/xmsc/img/foot-logo1.png"==$("#Website-security").prop("src")?$("#Website-security").prop("src","img/foot-logo2.png"):$("#Website-security").prop("src","img/foot-logo1.png")},2e3),$(".checkbox").eq(0).click(function(){0==$(".checkbox").eq(0).is(".checked")?($(".checkbox").addClass("checked"),$(".checkbox").css("color","#fff")):$(".checkbox").removeClass("checked"),Compute.allMoney(),Compute.footNumber()}),check(),getGoods(),$(".content-box").removeClass("h"),$(".content").css("display","none"),$(".login").css("display","none"),$(".content-login").css("display","block"),check(),Compute.eventBind(),Compute.del();